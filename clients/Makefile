# Makefile for Qwen3 Raspberry Pi Client
# ç”¨äºç¼–è¯‘ simple_client.cpp

# ç¼–è¯‘å™¨é…ç½®
CXX = g++
CXXFLAGS = -std=c++17 -O2 -Wall -Wextra
LDFLAGS = -lcurl

# ç›®æ ‡æ–‡ä»¶
TARGET = simple_client
SOURCE = simple_client.cpp

# é»˜è®¤ç›®æ ‡
all: $(TARGET)

# ç¼–è¯‘è§„åˆ™
$(TARGET): $(SOURCE)
	@echo "ğŸ”¨ ç¼–è¯‘ $(TARGET)..."
	$(CXX) $(CXXFLAGS) -o $(TARGET) $(SOURCE) $(LDFLAGS)
	@echo "âœ… ç¼–è¯‘å®Œæˆ: $(TARGET)"

# æ¸…ç†
clean:
	@echo "ğŸ§¹ æ¸…ç†ç¼–è¯‘æ–‡ä»¶..."
	rm -f $(TARGET)
	@echo "âœ… æ¸…ç†å®Œæˆ"

# å®‰è£…ï¼ˆå¤åˆ¶åˆ° /usr/local/binï¼‰
install: $(TARGET)
	@echo "ğŸ“¦ å®‰è£… $(TARGET) åˆ° /usr/local/bin..."
	sudo cp $(TARGET) /usr/local/bin/
	sudo chmod +x /usr/local/bin/$(TARGET)
	@echo "âœ… å®‰è£…å®Œæˆ"

# å¸è½½
uninstall:
	@echo "ğŸ—‘ï¸  å¸è½½ $(TARGET)..."
	sudo rm -f /usr/local/bin/$(TARGET)
	@echo "âœ… å¸è½½å®Œæˆ"

# æµ‹è¯•
test: $(TARGET)
	@echo "ğŸ§ª è¿è¡Œæµ‹è¯•..."
	./$(TARGET) "What is 2+2?"

# å¸®åŠ©
help:
	@echo "Makefile ä½¿ç”¨è¯´æ˜:"
	@echo "  make          - ç¼–è¯‘ç¨‹åº"
	@echo "  make clean    - æ¸…ç†ç¼–è¯‘æ–‡ä»¶"
	@echo "  make install  - å®‰è£…åˆ°ç³»ç»Ÿ"
	@echo "  make uninstall- ä»ç³»ç»Ÿå¸è½½"
	@echo "  make test     - è¿è¡Œæµ‹è¯•"
	@echo "  make help     - æ˜¾ç¤ºæ­¤å¸®åŠ©"

.PHONY: all clean install uninstall test help